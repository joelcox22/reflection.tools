(this["webpackJsonpreflection.tools"]=this["webpackJsonpreflection.tools"]||[]).push([[0],{173:function(e,t,a){},174:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(57),o=a.n(r),s=(a(65),a(2)),i=a(60),l=a(1),d={"0xfbab1d829e36efbd13642229eae2964004f38c41":"Evergrow","0x9aacfd4ff2a965779cff25e370b89b788222e6b9":"Crypter","0xfdac78ff52dead5a5f0b89b32a8ea66a01979f31":"Reflecto","0xdedf5fa8ec49255bc2c7bfadcd18be2c0d228f99":"Reflecto","0x7bda2f125b0e63bb332e1e6342be381e28efaeb6":"Reflecto","0x65ab1b70c70011e4ea5a7268df159480c47e7f98":"Reflecto","0xd93a7af8d6292030947b13dd2942a8d2baca649b":"Santa Coin","0x62c73478676848b96b729a3f2e25412735154df0":"Corsac","0x35074b2ab33048c84f37744484ee63e469dc68b8":"Techno Floki","0xf8b814824efd4a2d238fcaa46f608bfd18236e8c":"ForeverGrow","0x9e90d5e53baa6254be7db9cdb4afb4c60f9aacf7":"Y-5 Finance","0xa383829c57a1b7ccbf7c6cf00c4dea06a8c2e814":"Rematic EGC","0x0b4a50a097848eea10e8848459ec1539645e5175":"Boda V2","0x284c54b37f2ac667d84f0aa5d5bdfc8d3687304a":"Reflex Finance"},u=Object.values(d).filter((function(e,t,a){return a.indexOf(e)===t})),f=u.reduce((function(e,t,a){return e[t]="hsl(".concat(a/u.length*270," 100% 50%)"),e}),{});function b(){var e=Object(n.useState)((function(){return window.location.hash.replace("#","")||localStorage.getItem("walletAddress")||""})),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(a),o=Object(s.a)(r,2),b=o[0],h=o[1],j=Object(n.useState)(a),g=Object(s.a)(j,2),p=g[0],O=g[1],w=Object(n.useState)(),x=Object(s.a)(w,2),m=x[0],v=x[1],y=Object(n.useState)(!1),k=Object(s.a)(y,2),S=k[0],C=k[1],E=Object(n.useState)(0),F=Object(s.a)(E,2),I=F[0],T=F[1];return Object(n.useEffect)((function(){var e=setTimeout((function(){h(a.trim())}),500);return localStorage.setItem("walletAddress",a),window.addEventListener("hashchange",(function(){var e=window.location.hash.replace("#","");e!==a&&(c(e),h(e))})),function(){clearTimeout(e)}}),[a]),Object(n.useEffect)((function(){if(window.location.hash=b,""===b)return window.gtag("event","empty-wallet-address"),C(!1),v(!1),void O(null);if(!b.match(/^0x[A-Za-z0-9]{40}$/))return v("Invalid wallet address."),C(!1),O(null),void window.gtag("event","invalid-wallet-address");window.gtag("event","lookup-wallet-address"),C(!0),v(!1);var e=new URLSearchParams({module:"account",action:"tokentx",address:b,sort:"ASC"});fetch("https://api.bscscan.com/api?".concat(e.toString())).then((function(e){return e.json()})).then((function(e){if(C(!1),"NOTOK"===e.message)return v(e.result),void window.gtag("event","rate-limited");if(e.errors)return window.gtag("event","data-lookup-error"),v(e.errors),void O(null);var t={},a=[],n=e.result.reduce((function(e,n){var c=d[n.from];if(!c)return e;var r=new Date(1e3*(n.timeStamp-0)).toISOString().split("T")[0],o=n.tokenSymbol,s=(n.value-0)/("1"+new Array(n.tokenDecimal-0).fill("0").join("")-0);return e[r]=e[r]||{},e[r][o]=e[r][o]||{},e[r][o][c]=e[r][o][c]||0,e[r][o][c]+=s,a.includes(o)||a.push(o),t[o]=t[o]||{},t[o][c]=(t[o][c]||0)+s,e}),{}),c={};a.forEach((function(e){var a=c[e]={labels:[],datasets:{}};Object.entries(n).forEach((function(e){var t=Object(s.a)(e,2),n=t[0];t[1];a.labels.push(n)})),u.forEach((function(n){a.datasets[n]={label:"".concat(n," (").concat(Math.round(t[e][n]).toLocaleString(),")"),backgroundColor:f[n],data:[]}}))})),Object.entries(n).forEach((function(e){var t=Object(s.a)(e,2),n=(t[0],t[1]);a.forEach((function(e){u.forEach((function(t){var a;c[e].datasets[t].data.push((null===(a=n[e])||void 0===a?void 0:a[t])||0)}))}))})),a.forEach((function(e){var t=c[e];t.datasets=Object.values(t.datasets).filter((function(e){return e.data.reduce((function(e,t){return e+t}),0)>0}))})),O(c)}))}),[b,I]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{children:"Enter your wallet address"}),Object(l.jsx)("input",{type:"text",value:a,onChange:function(e){return c(e.target.value)}}),Object(l.jsx)("div",{style:{maxWidth:600,margin:"auto",padding:20},children:""===b?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("p",{children:["This tool will fetch data about reflective tokens (",u.join(", "),"), and display how much you're earning from and in each token in a single place."]}),Object(l.jsx)("p",{children:"When you enter in your address, your browser makes a graphql query directly to https://api.bscscan.com/ to fetch all of your transactions, which are then processed client-side in your browser into simple graphs."}),Object(l.jsx)("p",{children:"There's a good chance this tool might break sometime. It's just been hacked together in a few hours so far, and is not using any API key, so currently limited to 1 request every 5 seconds."}),Object(l.jsxs)("p",{children:["Feel free to log any issues ",Object(l.jsx)("a",{href:"https://github.com/joelcox22/reflection.tools/issues",target:"_blank",rel:"noreferrer",children:"in Github Issues"}),". ",Object(l.jsx)("a",{href:"https://github.com/joelcox22/reflection.tools",target:"_blank",rel:"noreferrer",children:"Full source code is available there too"}),"."]}),Object(l.jsx)("p",{children:"Google analytics is setup purely so I can see how many people use this and if it's worth continuing development. Cookies are disabled - it's only interaction events with the page being logged."}),Object(l.jsx)("p",{children:"Pull requests are welcome if anyone wants to help out or add more tokens."}),Object(l.jsx)("p",{children:"I'd love to find a way to also fetch and display pending rewards from all of these tokens - if anyone knows how, please let me know via a Github Issue or something."})]}):m?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("pre",{children:JSON.stringify(m,null,4)}),"string"===typeof m&&m.includes("rate limit")&&Object(l.jsx)("button",{onClick:function(){T(I+1),window.gtag("event","refresh-because-rate-limited")},children:"Click here to try again"})]}):S?Object(l.jsx)("p",{children:"Loading..."}):p&&Object.entries(p).map((function(e){var t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(l.jsxs)(n.Fragment,{children:[Object(l.jsx)("h1",{children:a}),Object(l.jsx)(i.a,{data:c,width:100,height:50,options:{scales:{x:{stacked:!0},y:{stacked:!0}}}})]},a)}))})]})}a(173);var h=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("header",{className:"App-header",children:Object(l.jsx)("h1",{children:"Crypto Reflections"})}),Object(l.jsx)(b,{})]})},j=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,175)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),r(e),o(e)}))};o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(h,{})}),document.getElementById("root")),j()},65:function(e,t,a){}},[[174,1,2]]]);
//# sourceMappingURL=main.d0334795.chunk.js.map